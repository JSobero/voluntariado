import{a as D}from"./chunk-NLOECX47.js";import"./chunk-E5QAETHB.js";import{a as k}from"./chunk-YCCDCEVG.js";import{d as z}from"./chunk-MTNAIJ3P.js";import"./chunk-3LARRLV4.js";import{Ga as E,La as C,Rb as P,S as m,Sb as y,Tb as S,Vb as A,Wa as d,X as v,Xa as i,Xb as w,Y as _,Ya as o,Za as l,a as u,ab as x,b as f,bb as M,cb as p,kb as a,lb as b,mb as g,nb as O,va as s,vb as I,xb as h}from"./chunk-G3BCAZWB.js";function V(r,n){r&1&&(i(0,"div",6),l(1,"div",7),i(2,"p"),a(3,"Cargando tus inscripciones..."),o()())}function B(r,n){if(r&1){let e=x();i(0,"div",8),l(1,"i",9),i(2,"p"),a(3),o(),i(4,"button",10),M("click",function(){v(e);let c=p();return _(c.cargarMisInscripciones())}),a(5,"Reintentar"),o()()}if(r&2){let e=p();s(3),b(e.error)}}function H(r,n){if(r&1){let e=x();i(0,"div",11),l(1,"i",12),i(2,"h2"),a(3,"A\xFAn no tienes inscripciones"),o(),i(4,"p"),a(5,"\xA1Explora los eventos y \xFAnete a una causa!"),o(),i(6,"button",13),M("click",function(){v(e);let c=p();return _(c.irAEventos())}),a(7,"Buscar Eventos"),o()()}}function R(r,n){if(r&1&&(i(0,"div",16)(1,"div",17)(2,"h3",18),a(3),o(),i(4,"div",19)(5,"span"),l(6,"i",20),a(7),I(8,"date"),o(),i(9,"span"),l(10,"i",21),a(11),o()()(),i(12,"div",22)(13,"span",23),a(14),o(),i(15,"p",24),a(16),I(17,"date"),o()()()),r&2){let e=n.$implicit,t=p(2);s(3),b(e.evento.titulo),s(4),g(" ",h(8,7,e.evento.fechaInicio,"dd 'de' MMMM, yyyy")," "),s(4),g(" ",e.evento.lugar," "),s(2),d("ngClass",t.obtenerClaseEstado(e.estado)),s(),O(" ",t.obtenerIconoEstado(e.estado)," ",e.estado," "),s(2),g(" Solicitado: ",h(17,10,e.solicitadoEn,"dd/MM/yy 'a las' HH:mm")," ")}}function q(r,n){if(r&1&&(i(0,"div",14),C(1,R,18,13,"div",15),o()),r&2){let e=p();s(),d("ngForOf",e.misInscripciones)}}var N=class r{inscripcionService=m(D);authService=m(k);router=m(z);misInscripciones=[];cargando=!0;error=null;constructor(){}ngOnInit(){this.cargarMisInscripciones()}cargarMisInscripciones(){this.cargando=!0;let n=this.authService.currentUser();if(!n){this.error="No est\xE1s autenticado para ver esta p\xE1gina.",this.cargando=!1,this.router.navigate(["/login"]);return}let e=n.id;this.inscripcionService.getByUsuario(e).subscribe({next:t=>{this.misInscripciones=t.map(c=>f(u({},c),{evento:f(u({},c.evento),{fechaInicio:this.convertirFecha(c.evento.fechaInicio)}),solicitadoEn:this.convertirFecha(c.solicitadoEn)})),this.cargando=!1},error:t=>{console.error("Error al cargar inscripciones:",t),this.error="No se pudieron cargar tus inscripciones.",this.cargando=!1}})}convertirFecha(n){if(!n)return"";if(Array.isArray(n)&&n.length>=3){let[e,t,c,F=0,T=0,j=0]=n;return new Date(e,t-1,c,F,T,j).toISOString()}return typeof n=="string"?n:""}obtenerClaseEstado(n){switch(n){case"PENDIENTE":return"estado-pendiente";case"ACEPTADA":return"estado-aceptada";case"RECHAZADA":return"estado-rechazada";default:return"estado-default"}}obtenerIconoEstado(n){switch(n){case"PENDIENTE":return"\u23F3";case"ACEPTADA":return"\u2705";case"RECHAZADA":return"\u274C";default:return"\u2753"}}verDetalleEvento(n){this.router.navigate(["/eventos",n])}irAEventos(){this.router.navigate(["/eventos"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-mis-inscripciones"]],decls:11,vars:4,consts:[[1,"contenedor-pagina-usuario"],[1,"encabezado-usuario"],["class","contenedor-carga-simple",4,"ngIf"],["class","contenedor-error-simple",4,"ngIf"],["class","contenedor-vacio-simple",4,"ngIf"],["class","lista-inscripciones",4,"ngIf"],[1,"contenedor-carga-simple"],[1,"giratorio"],[1,"contenedor-error-simple"],[1,"bi","bi-exclamation-triangle-fill"],[1,"boton-recargar",3,"click"],[1,"contenedor-vacio-simple"],[1,"bi","bi-journal-x"],[1,"boton-explorar",3,"click"],[1,"lista-inscripciones"],["class","tarjeta-inscripcion",4,"ngFor","ngForOf"],[1,"tarjeta-inscripcion"],[1,"info-evento"],[1,"titulo-evento"],[1,"meta-evento"],[1,"bi","bi-calendar-event"],[1,"bi","bi-geo-alt-fill"],[1,"info-estado"],[1,"insignia-estado",3,"ngClass"],[1,"fecha-solicitud"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"header",1),l(2,"br"),i(3,"h1"),a(4,"Mis Inscripciones"),o(),i(5,"p"),a(6,"Aqu\xED puedes ver el estado de todos los eventos a los que te has unido."),o()(),C(7,V,4,0,"div",2)(8,B,6,1,"div",3)(9,H,8,0,"div",4)(10,q,2,1,"div",5),o()),e&2&&(s(7),d("ngIf",t.cargando),s(),d("ngIf",t.error&&!t.cargando),s(),d("ngIf",!t.cargando&&!t.error&&t.misInscripciones.length===0),s(),d("ngIf",!t.cargando&&!t.error&&t.misInscripciones.length>0))},dependencies:[w,P,y,S,A],styles:[".contenedor-pagina-usuario[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto;padding:1rem}.encabezado-usuario[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-bottom:1.5rem;margin-bottom:2rem}.encabezado-usuario[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0}.encabezado-usuario[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#666}.lista-inscripciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-top:2rem}.tarjeta-inscripcion[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 2px 5px #0000000d;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:1.5rem;gap:1rem}.info-evento[_ngcontent-%COMP%]{flex:3;min-width:300px}.info-evento[_ngcontent-%COMP%]   .titulo-evento[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin:0 0 .5rem}.info-evento[_ngcontent-%COMP%]   .meta-evento[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;color:#555}.meta-evento[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.info-estado[_ngcontent-%COMP%]{flex:1;text-align:right;min-width:150px}.insignia-estado[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;padding:.5rem 1rem;border-radius:20px;display:inline-block;margin-bottom:.5rem;text-transform:capitalize}.fecha-solicitud[_ngcontent-%COMP%]{font-size:.85rem;color:#777;margin:0}.estado-pendiente[_ngcontent-%COMP%]{background-color:#fffbeb;color:#b45309}.estado-aceptada[_ngcontent-%COMP%]{background-color:#f0fdf4;color:#16a34a}.estado-rechazada[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.contenedor-carga-simple[_ngcontent-%COMP%], .contenedor-error-simple[_ngcontent-%COMP%], .contenedor-vacio-simple[_ngcontent-%COMP%]{text-align:center;padding:4rem 1rem;background:#f9f9f9;border-radius:8px;margin-top:2rem}.contenedor-vacio-simple[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#999}.contenedor-vacio-simple[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:1rem 0 .5rem}.contenedor-vacio-simple[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.boton-explorar[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:5px;cursor:pointer;font-size:1rem;margin-top:1rem}"]})};export{N as MisInscripcionesComponent};
