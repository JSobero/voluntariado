import{a as D}from"./chunk-6YICDHNG.js";import{a as k}from"./chunk-TXX75TQF.js";import{a as I}from"./chunk-XJX4GHT5.js";import{a as z}from"./chunk-YHVJXAO3.js";import{d as E,h as y}from"./chunk-MTNAIJ3P.js";import"./chunk-E5QAETHB.js";import"./chunk-3LARRLV4.js";import{Aa as l,Ga as h,La as v,Sb as M,Tb as P,Vb as w,Wa as m,Xa as e,Xb as S,Ya as t,Za as c,a as b,b as u,bb as x,cb as C,kb as n,lb as s,mb as g,va as a,vb as _,xb as O}from"./chunk-G3BCAZWB.js";function T(d,i){d&1&&(e(0,"div",39),c(1,"div",40),e(2,"p"),n(3,"Cargando datos..."),t()())}function N(d,i){d&1&&(e(0,"div",41)(1,"div",42),c(2,"i",43),t(),e(3,"h3"),n(4,"No hay eventos registrados"),t(),e(5,"p"),n(6,"Los eventos aparecer\xE1n aqu\xED una vez que sean creados"),t()())}function R(d,i){if(d&1&&(e(0,"tr",47)(1,"td",48)(2,"div",49),c(3,"span",50),e(4,"span",51),n(5),t()()(),e(6,"td",52)(7,"div"),c(8,"i",53),n(9),_(10,"date"),t()(),e(11,"td",54)(12,"div"),c(13,"i",55),n(14),t()(),e(15,"td",56)(16,"span",57),n(17),t()(),e(18,"td",58)(19,"div",59)(20,"div",60),n(21),t(),e(22,"span"),n(23),t()()()()),d&2){let o=i.$implicit;a(5),s(o.titulo),a(4),g(" ",O(10,6,o.fechaInicio,"dd/MM/yyyy, hh:mm a")," "),a(5),g(" ",o.lugar," "),a(3),g(" ",o.cupoMaximo," personas "),a(4),g(" ",(o.organizador==null||o.organizador.nombre==null?null:o.organizador.nombre.charAt(0))||"O"," "),a(2),s((o.organizador==null?null:o.organizador.nombre)||"Sin organizador")}}function U(d,i){if(d&1&&(e(0,"div",44)(1,"table",45)(2,"thead")(3,"tr")(4,"th"),n(5,"T\xEDtulo"),t(),e(6,"th"),n(7,"Fecha Inicio"),t(),e(8,"th"),n(9,"Lugar"),t(),e(10,"th"),n(11,"Cupo"),t(),e(12,"th"),n(13,"Organizador"),t()()(),e(14,"tbody"),v(15,R,24,9,"tr",46),t()()()),d&2){let o=C();a(15),m("ngForOf",o.recentEvents)}}var j=class d{constructor(i,o,r,p,f){this.usuarioService=i;this.eventoService=o;this.certificadoService=r;this.canjeService=p;this.router=f}stats={usuarios:0,eventos:0,certificados:0,canjes:0};recentEvents=[];loading=!0;ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.usuarioService.getAll().subscribe(i=>{this.stats.usuarios=i.length}),this.eventoService.getAll().subscribe(i=>{console.log("\u{1F4C5} Eventos recibidos desde el backend:",i),i.length>0&&console.log("\u{1F9E9} Estructura del primer evento:",i[0]);let o=i.map(r=>u(b({},r),{fechaInicio:this.convertirFecha(r.fechaInicio),fechaFin:r.fechaFin?this.convertirFecha(r.fechaFin):void 0}));this.stats.eventos=o.length,this.recentEvents=o.slice(0,5),this.loading=!1}),this.certificadoService.getAll().subscribe(i=>{this.stats.certificados=i.length}),this.canjeService.getAll().subscribe(i=>{this.stats.canjes=i.length})}convertirFecha(i){if(!i)return null;if(Array.isArray(i)&&i.length>=3){let[o,r,p,f=0,A=0,F=0]=i;return new Date(o,r-1,p,f,A,F)}if(typeof i=="string"){let o=new Date(i);return isNaN(o.getTime())?null:o}return i instanceof Date?isNaN(i.getTime())?null:i:null}verTodosEventos(){this.router.navigate(["/admin/eventos"])}static \u0275fac=function(o){return new(o||d)(l(I),l(k),l(D),l(z),l(E))};static \u0275cmp=h({type:d,selectors:[["app-dashboard"]],decls:84,vars:7,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-content"],[1,"header-left"],[1,"dashboard-title"],[1,"dashboard-subtitle"],[1,"header-right"],[1,"user-info"],[1,"user-details"],[1,"user-role"],[1,"user-email"],[1,"user-avatar"],[1,"stats-grid"],[1,"stat-card","stat-card-blue"],[1,"stat-icon-wrapper"],[1,"stat-icon"],[1,"bi","bi-people-fill"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-trend","stat-trend-up"],[1,"trend-icon","bi","bi-arrow-up-short"],[1,"trend-text"],[1,"stat-card","stat-card-green"],[1,"bi","bi-calendar4-event"],[1,"stat-card","stat-card-purple"],[1,"bi","bi-award-fill"],[1,"stat-card","stat-card-orange"],[1,"bi","bi-gift-fill"],[1,"events-section"],[1,"section-header"],[1,"section-title-wrapper"],[1,"section-title"],[1,"section-subtitle"],[1,"btn-view-all",3,"click"],[1,"arrow","bi","bi-arrow-right"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],[1,"empty-icon"],[1,"bi","bi-calendar-x"],[1,"table-container"],[1,"events-table"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"event-title"],[1,"title-with-icon"],[1,"event-dot"],[1,"title-text"],[1,"event-date"],[1,"date-icon","bi","bi-calendar2-week"],[1,"event-location"],[1,"location-icon","bi","bi-geo-alt-fill"],[1,"event-capacity"],[1,"capacity-badge"],[1,"event-organizer"],[1,"organizer-info"],[1,"organizer-avatar"]],template:function(o,r){o&1&&(e(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1",4),n(5,"Dashboard Administrativo"),t(),e(6,"p",5),n(7,"Bienvenido de nuevo, Admin \u{1F44B}"),t()(),e(8,"div",6)(9,"div",7)(10,"div",8)(11,"p",9),n(12,"Administrador"),t(),e(13,"p",10),n(14,"admin@voluntariado.com"),t()(),e(15,"div",11)(16,"span"),n(17,"A"),t()()()()()(),e(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15),c(22,"i",16),t()(),e(23,"div",17)(24,"p",18),n(25),t(),e(26,"p",19),n(27,"Total Usuarios"),t()(),e(28,"div",20),c(29,"i",21),e(30,"span",22),n(31,"12% este mes"),t()()(),e(32,"div",23)(33,"div",14)(34,"div",15),c(35,"i",24),t()(),e(36,"div",17)(37,"p",18),n(38),t(),e(39,"p",19),n(40,"Eventos Activos"),t()(),e(41,"div",20),c(42,"i",21),e(43,"span",22),n(44,"8% este mes"),t()()(),e(45,"div",25)(46,"div",14)(47,"div",15),c(48,"i",26),t()(),e(49,"div",17)(50,"p",18),n(51),t(),e(52,"p",19),n(53,"Certificados Emitidos"),t()(),e(54,"div",20),c(55,"i",21),e(56,"span",22),n(57,"15% este mes"),t()()(),e(58,"div",27)(59,"div",14)(60,"div",15),c(61,"i",28),t()(),e(62,"div",17)(63,"p",18),n(64),t(),e(65,"p",19),n(66,"Recompensas Canjeadas"),t()(),e(67,"div",20),c(68,"i",21),e(69,"span",22),n(70,"20% este mes"),t()()()(),e(71,"div",29)(72,"div",30)(73,"div",31)(74,"h2",32),n(75,"Eventos Recientes"),t(),e(76,"p",33),n(77,"\xDAltimos eventos registrados en el sistema"),t()(),e(78,"button",34),x("click",function(){return r.verTodosEventos()}),n(79," Ver todos "),c(80,"i",35),t()(),v(81,T,4,0,"div",36)(82,N,7,0,"div",37)(83,U,16,1,"div",38),t()()),o&2&&(a(25),s(r.stats.usuarios),a(13),s(r.stats.eventos),a(13),s(r.stats.certificados),a(13),s(r.stats.canjes),a(17),m("ngIf",r.loading),a(),m("ngIf",!r.loading&&r.recentEvents.length===0),a(),m("ngIf",!r.loading&&r.recentEvents.length>0))},dependencies:[y,S,M,P,w],styles:['.dashboard-header[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%], .stat-trend-up[_ngcontent-%COMP%], .events-section[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%], .events-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .events-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%], .capacity-badge[_ngcontent-%COMP%]{transition:background-color .2s ease-in-out,color .2s ease-in-out,border-color .2s ease-in-out}.dashboard-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{background:var(--color-tarjeta);border-radius:16px;padding:2rem;margin-bottom:2rem;box-shadow:0 1px 3px #00000014}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:2rem}.header-left[_ngcontent-%COMP%]{flex:1}.dashboard-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0 0 .5rem;background:linear-gradient(135deg,#3b82f6,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.dashboard-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-texto-secundario);margin:0}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 1rem;background:var(--color-fondo-input);border-radius:12px}.user-details[_ngcontent-%COMP%]{text-align:right}.user-role[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-texto-secundario);margin:0 0 .25rem;text-transform:uppercase;letter-spacing:.05em;font-weight:600}.user-email[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-texto-principal);margin:0}.user-avatar[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#3b82f6,#2563eb);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.25rem;font-weight:700;box-shadow:0 4px 12px #3b82f64d}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{background:var(--color-tarjeta);border-radius:16px;padding:1.75rem;position:relative;overflow:hidden;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 1px 3px #00000014}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #0000001f}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--card-color-start),var(--card-color-end))}.stat-card-blue[_ngcontent-%COMP%]{--card-color-start: #3b82f6;--card-color-end: #2563eb}.stat-card-green[_ngcontent-%COMP%]{--card-color-start: #10b981;--card-color-end: #059669}.stat-card-purple[_ngcontent-%COMP%]{--card-color-start: #8b5cf6;--card-color-end: #7c3aed}.stat-card-orange[_ngcontent-%COMP%]{--card-color-start: #f97316;--card-color-end: #ea580c}.stat-icon-wrapper[_ngcontent-%COMP%]{margin-bottom:1.25rem}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:1.75rem;background:linear-gradient(135deg,var(--card-color-start),var(--card-color-end));box-shadow:0 8px 16px #0000001f}.stat-content[_ngcontent-%COMP%]{margin-bottom:1rem}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;color:var(--color-texto-principal);margin:0 0 .5rem;line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-texto-secundario);font-weight:600;margin:0;text-transform:uppercase;letter-spacing:.05em}.stat-trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;font-size:.75rem;font-weight:600;padding:.375rem .75rem;border-radius:8px;width:fit-content}.stat-trend-up[_ngcontent-%COMP%]{background:var(--color-success-sutil);color:var(--color-success-sutil-texto)}.trend-icon[_ngcontent-%COMP%]{font-size:1rem}.trend-text[_ngcontent-%COMP%]{white-space:nowrap}.events-section[_ngcontent-%COMP%]{background:var(--color-tarjeta);border-radius:16px;padding:2rem;box-shadow:0 1px 3px #00000014}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:2px solid var(--color-borde-divisor)}.section-title-wrapper[_ngcontent-%COMP%]{flex:1}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-texto-principal);margin:0 0 .375rem}.section-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-texto-secundario);margin:0}.btn-view-all[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;border-radius:10px;font-weight:600;font-size:.875rem;cursor:pointer;transition:all .2s;box-shadow:0 4px 12px #3b82f64d}.btn-view-all[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #3b82f666}.arrow[_ngcontent-%COMP%]{font-size:1rem;transition:transform .2s}.btn-view-all[_ngcontent-%COMP%]:hover   .arrow[_ngcontent-%COMP%]{transform:translate(4px)}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid var(--color-borde);border-top-color:var(--color-acento);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-texto-secundario);font-size:.875rem;margin:0}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-texto-principal);margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-texto-secundario);font-size:.875rem;margin:0}.table-container[_ngcontent-%COMP%]{overflow-x:auto;border-radius:12px;border:1px solid var(--color-borde)}.events-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.events-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-fondo-input)}.events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem 1.5rem;text-align:left;font-size:.75rem;font-weight:700;color:var(--color-texto-secundario);text-transform:uppercase;letter-spacing:.05em;border-bottom:2px solid var(--color-borde)}.events-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-borde-divisor)}.events-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-fondo-hover)}.events-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;font-size:.875rem}.event-title[_ngcontent-%COMP%]{font-weight:600;color:var(--color-texto-principal)}.title-with-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.event-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:linear-gradient(135deg,#3b82f6,#2563eb);flex-shrink:0}.title-text[_ngcontent-%COMP%]{font-weight:600}.event-date[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .event-location[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--color-texto-secundario);display:flex;align-items:center;gap:.5rem}.date-icon[_ngcontent-%COMP%], .location-icon[_ngcontent-%COMP%]{font-size:1rem}.capacity-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.375rem .875rem;background:var(--color-acento-sutil);color:var(--color-acento-sutil-texto);border-radius:8px;font-size:.75rem;font-weight:600}.organizer-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.organizer-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.75rem;flex-shrink:0}.event-organizer[_ngcontent-%COMP%]{color:var(--color-texto-secundario);font-weight:500}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}.dashboard-header[_ngcontent-%COMP%]{padding:1.5rem}.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.dashboard-title[_ngcontent-%COMP%]{font-size:1.5rem}.user-info[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.btn-view-all[_ngcontent-%COMP%]{width:100%;justify-content:center}.table-container[_ngcontent-%COMP%]{overflow-x:scroll}.events-table[_ngcontent-%COMP%]{min-width:800px}}@media (max-width: 480px){.stat-card[_ngcontent-%COMP%]{padding:1.25rem}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;font-size:1.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem}.events-section[_ngcontent-%COMP%]{padding:1rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem}.events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .events-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem}}']})};export{j as DashboardComponent};
